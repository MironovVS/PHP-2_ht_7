<?php// Базовый класс контроллера.abstract class C_Controller{	public function __construct(){		setlocale(LC_ALL, 'ru_RU.UTF-8');		mb_internal_encoding('UTF-8');		if(session_status()!=PHP_SESSION_ACTIVE) session_start();	}	// Генерация внешнего шаблона	protected abstract function render();		// Функция отрабатывающая до основного метода	protected abstract function before();		public function Request($action)	{		$this->auth();		$this->before();		$this->$action();		$this->render();	}	protected function auth(){}	// Запрос произведен методом GET?	protected function IsGet()	{		return $_SERVER['REQUEST_METHOD'] == 'GET';	}	// Запрос произведен методом POST?	protected function IsPost()	{		return $_SERVER['REQUEST_METHOD'] == 'POST';	}	// Генерация HTML шаблона в строку.	protected function Template($fileName, $vars = array())	{		if(file_exists($fileName)){			extract($vars);			ob_start();			include "$fileName";			return ob_get_clean();			}		else{			return "Файл шаблона {$fileName} не найден!";		}	}			// Если вызвали метод, которого нет - завершаем работу	public function __call($name, $params){        header("{$_SERVER['SERVER_PROTOCOL']} 404 Not Found");        die('Страница не найдена!');	}}